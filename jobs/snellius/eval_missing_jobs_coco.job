#!/bin/bash
#SBATCH -t 100:00:00
#SBATCH -N 1
#SBATCH --cpus-per-task=10
#SBATCH --mem=25gb
#SBATCH --gpus=1
#SBATCH --partition=gpu
#SBATCH -o ./logs/snellius/eval_missing_jobs_coco.out

source /home/mhendriksen2/miniconda3/etc/profile.d/conda.sh
conda activate /gpfs/home2/mhendriksen2/projects/eval_39

DATASET=coco
echo 'Dataset: ' $DATASET

MODEL=altclip
declare -a PERTURBATIONS=(
    'shuffle_trigrams'
    )
for PERTURBATION in "${PERTURBATIONS[@]}"
do
   echo MODEL: $MODEL
   python src/evaluation.py \
    --dataset $DATASET \
    --model $MODEL \
    --perturbation $PERTURBATION \
    --task t2i
done

MODEL=clip
declare -a PERTURBATIONS=(
    'missing_char'
    'extra_char'
    'shuffle_nouns_and_adj'
    'shuffle_all_words'
    'shuffle_within_trigrams'
    )
for PERTURBATION in "${PERTURBATIONS[@]}"
do
   echo MODEL: $MODEL
   python src/evaluation.py \
    --dataset $DATASET \
    --model $MODEL \
    --perturbation $PERTURBATION \
    --task t2i
done
