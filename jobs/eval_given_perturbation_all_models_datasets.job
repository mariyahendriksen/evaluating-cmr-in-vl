#!/bin/sh
PERTURBATION=$1
CUDA_VISIBLE_DEVICES=$2

declare -a DATASETS=(
    "f30k"
    "coco"
    )

declare -a MODELS=(
    "altclip"
    "align"
    "groupvit"
    "clip"
    )

for DATASET in "${DATASETS[@]}"; do
    for MODEL in "${MODELS[@]}"; do
        echo $MODEL ' evaluation with ' $PERTURBATION ' perturbation on ' $DATASET
        echo 'CUDA_VISIBLE_DEVICES: ' $CUDA_VISIBLE_DEVICES
        CUDA_VISIBLE_DEVICES=$CUDA_VISIBLE_DEVICES python src/evaluation.py \
            --dataset $DATASET \
            --model $MODEL \
            --perturbation $PERTURBATION \
            --task t2i
    done;
done;
echo 'Done!'
